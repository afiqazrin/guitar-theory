(()=>{"use strict";function n(n){return null!==n&&"object"==typeof n&&"name"in n&&"string"==typeof n.name}function t(n){return null!==n&&"object"==typeof n&&"step"in n&&"number"==typeof n.step&&"alt"in n&&"number"==typeof n.alt}var m=[0,2,4,-1,1,3,5],e=m.map((n=>Math.floor(7*n/12)));function a(n){const{step:t,alt:a,oct:r,dir:o=1}=n,i=m[t]+7*a;return void 0===r?[o*i]:[o*i,o*(r-e[t]-4*a)]}var r=[3,0,4,1,5,2,6];function o(n){const[t,m,a]=n,o=r[function(n){const t=(n+1)%7;return t<0?7+t:t}(t)],i=Math.floor((t+1)/7);return void 0===m?{step:o,alt:i,dir:a}:{step:o,alt:i,oct:m+4*i+e[o],dir:a}}var i=(n,t)=>Array(Math.abs(t)+1).join(n),s={empty:!0,name:"",acc:""},P=new RegExp("^([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})|(AA|A|P|M|m|d|dd)([-+]?\\d+)$"),M={};function c(m){return"string"==typeof m?M[m]||(M[m]=function(n){const t=function(n){const t=P.exec(`${n}`);return null===t?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}(n);if(""===t[0])return s;const m=+t[0],e=t[1],r=(Math.abs(m)-1)%7,o=u[r];if("M"===o&&"P"===e)return s;const i="M"===o?"majorable":"perfectable",M=""+m+e,c=m<0?-1:1,d=8===m||-8===m?m:c*(r+1),h=function(n,t){return"M"===t&&"majorable"===n||"P"===t&&"perfectable"===n?0:"m"===t&&"majorable"===n?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*("perfectable"===n?t.length:t.length+1):0}(i,e),p=Math.floor((Math.abs(m)-1)/7);return{empty:!1,name:M,num:m,q:e,step:r,alt:h,dir:c,type:i,simple:d,semitones:c*(l[r]+h+12*p),chroma:(c*(l[r]+h)%12+12)%12,coord:a({step:r,alt:h,oct:p,dir:c}),oct:p}}(m)):t(m)?c(function(n){const{step:t,alt:m,oct:e=0,dir:a}=n;if(!a)return"";const r=t+1+7*e,o=(a<0?"-":"")+(0===r?t+1:r)+function(n,t){return 0===t?"majorable"===n?"M":"P":-1===t&&"majorable"===n?"m":t>0?i("A",t):i("d","perfectable"===n?t:t+1)}("M"===u[t]?"majorable":"perfectable",m);return o}(m)):n(m)?c(m.name):s}var l=[0,2,4,5,7,9,11],u="PMMPPMM";function d(n,t){const[m,e=0]=n;return c(o(t||7*m+12*e<0?[-m,-e,-1]:[m,e,1]))}var h=(n,t)=>Array(Math.abs(t)+1).join(n),p={empty:!0,name:"",pc:"",acc:""},f=new Map,b=n=>"CDEFGAB".charAt(n),y=n=>n<0?h("b",-n):h("#",n),A=n=>"b"===n[0]?-n.length:n.length;function g(m){const e=JSON.stringify(m),r=f.get(e);if(r)return r;const o="string"==typeof m?function(n){const t=j(n);if(""===t[0]||""!==t[3])return p;const m=t[0],e=t[1],r=t[2],o=(m.charCodeAt(0)+3)%7,i=A(e),s=r.length?+r:void 0,P=a({step:o,alt:i,oct:s}),M=m+e+r,c=m+e,l=(x[o]+i+120)%12,u=void 0===s?I(x[o]+i,12)-1188:x[o]+i+12*(s+1),d=u>=0&&u<=127?u:null;return{empty:!1,acc:e,alt:i,chroma:l,coord:P,freq:void 0===s?null:440*Math.pow(2,(u-69)/12),height:u,letter:m,midi:d,name:M,oct:s,pc:c,step:o}}(m):t(m)?g(function(n){const{step:t,alt:m,oct:e}=n,a=b(t);if(!a)return"";const r=a+y(m);return e||0===e?r+e:r}(m)):n(m)?g(m.name):p;return f.set(e,o),o}var v=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function j(n){const t=v.exec(n);return[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]}var I=(n,t)=>(n%t+t)%t,x=[0,2,4,5,7,9,11];function N(n,t){const m=g(n),e=Array.isArray(t)?t:c(t).coord;if(m.empty||!e||e.length<2)return"";const a=m.coord;return function(n){return g(o(n))}(1===a.length?[a[0]+e[0]]:[a[0]+e[0],a[1]+e[1]]).name}function D(n,t){const m=n.length;return e=>{if(!t)return"";const a=e<0?(m- -e%m)%m:e%m,r=Math.floor(e/m),o=N(t,[0,r]);return N(o,n[a])}}function V(n,t,m){return function(...e){return console.warn(`${n} is deprecated. Use ${t}.`),m.apply(this,e)}}var w=V("isNamed","isNamedPitch",n);function S(n,t){const m=t.length,e=(n%m+m)%m;return t.slice(e,m).concat(t.slice(0,e))}var $={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},T=n=>Number(n).toString(2).padStart(12,"0"),C=n=>parseInt(n,2),E=/^[01]{12}$/;function q(n){return E.test(n)}var k=n=>"number"==typeof n&&n>=0&&n<=4095,O=n=>n&&q(n.chroma),z={[$.chroma]:$};function F(n){const t=q(n)?n:k(n)?T(n):Array.isArray(n)?function(n){if(0===n.length)return $.chroma;let t;const m=[0,0,0,0,0,0,0,0,0,0,0,0];for(let e=0;e<n.length;e++)t=g(n[e]),t.empty&&(t=c(n[e])),t.empty||(m[t.chroma]=1);return m.join("")}(n):O(n)?n.chroma:$.chroma;return z[t]=z[t]||function(n){const t=C(n),m=function(n){const t=n.split("");return t.map(((n,m)=>S(m,t).join("")))}(n).map(C).filter((n=>n>=2048)).sort()[0],e=T(m),a=function(n){const t=[];for(let m=0;m<12;m++)"1"===n.charAt(m)&&t.push(G[m]);return t}(n);return{empty:!1,name:"",setNum:t,chroma:n,normalized:e,intervals:a}}(t)}V("Pcset.pcset","Pcset.get",F);var G=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function U(n,t=!0){const m=F(n).chroma.split("");return m.map(((n,e)=>{const a=S(e,m);return t&&"0"===a[0]?null:a.join("")})).filter((n=>0===n||n))}function B(n){const t=F(n).setNum;return n=>{const m=F(n).setNum;return t&&t!==m&&(m&t)===m}}function R(n){const t=F(n).setNum;return n=>{const m=F(n).setNum;return t&&t!==m&&(m|t)===m}}var L={...$,name:"",quality:"Unknown",intervals:[],aliases:[]},H=[],J={};function K(n){return J[n]||L}function Q(){return H.slice()}V("ChordType.chordType","ChordType.get",K),V("ChordType.entries","ChordType.all",Q),[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]].forEach((([n,t,m])=>function(n,t,m){const e=function(n){const t=t=>-1!==n.indexOf(t);return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}(n),a={...F(n),name:m||"",quality:e,intervals:n,aliases:t};H.push(a),a.name&&(J[a.name]=a),J[a.setNum]=a,J[a.chroma]=a,a.aliases.forEach((n=>function(n,t){J[t]=n}(a,n)))}(n.split(" "),m.split(" "),t))),H.sort(((n,t)=>n.setNum-t.setNum));var W=n=>t=>Boolean(t&n),X=W(384),Y=W(16),Z=W(3),_=W(40),nn={...$,intervals:[],aliases:[]},tn=[],mn={};function en(n){return mn[n]||nn}function an(){return tn.slice()}V("ScaleDictionary.scaleType","ScaleType.get",en),V("ScaleDictionary.entries","ScaleType.all",an),[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]].forEach((([n,t,...m])=>function(n,t,m=[]){const e={...F(n),name:t,intervals:n,aliases:m};return tn.push(e),mn[e.name]=e,mn[e.setNum]=e,mn[e.chroma]=e,e.aliases.forEach((n=>function(n,t){mn[t]=n}(e,n))),e}(n.split(" "),t,m)));var rn={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function on(n){const[t,m,e,a]=j(n);return""===t?["",n]:"A"===t&&"ug"===a?["","aug"]:[t+m,e+a]}function sn(n){if(""===n)return rn;if(Array.isArray(n)&&2===n.length)return Pn(n[1],n[0]);{const[t,m]=on(n),e=Pn(m,t);return e.empty?Pn(n):e}}function Pn(n,t,m){const e=K(n),a=g(t||""),r=g(m||"");if(e.empty||t&&a.empty||m&&r.empty)return rn;const o=function(n,t){const m=g(n),e=g(t);if(m.empty||e.empty)return"";const a=m.coord,r=e.coord,o=r[0]-a[0];return d([o,2===a.length&&2===r.length?r[1]-a[1]:-Math.floor(7*o/12)],e.height===m.height&&null!==e.midi&&null!==m.midi&&m.step>e.step).name}(a.pc,r.pc),i=e.intervals.indexOf(o)+1;if(!r.empty&&!i)return rn;const s=Array.from(e.intervals);for(let n=1;n<i;n++){const n=s[0][0],t=s[0][1],m=parseInt(n,10)+7;s.push(`${m}${t}`),s.shift()}const P=a.empty?[]:s.map((n=>N(a,n)));n=-1!==e.aliases.indexOf(n)?n:e.aliases[0];const M=`${a.empty?"":a.pc}${n}${r.empty||i<=1?"":"/"+r.pc}`,c=`${t?a.pc+" ":""}${e.name}${i>1&&m?" over "+r.pc:""}`;return{...e,name:c,symbol:M,type:e.name,root:r.name,intervals:s,rootDegree:i,tonic:a.name,notes:P}}V("Chord.chord","Chord.get",sn);var Mn=[];function cn(n){return(t,m)=>{const e=c(t).coord,a=c(m).coord;if(e&&a)return d(n(e,a)).name}}[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]].forEach((([n,t,m])=>function(n,t,m){Mn.push({empty:!1,dots:"",name:"",value:1/n,fraction:n<1?[1/n,1]:[1,n],shorthand:t,names:m})}(n,t,m))),"P m M m M P d P m M m M".split(" "),cn(((n,t)=>[n[0]+t[0],n[1]+t[1]])),cn(((n,t)=>[n[0]-t[0],n[1]-t[1]])),Math.log(2),Math.log(440);var ln="C C# D D# E F F# G G# A A# B".split(" "),un="C Db D Eb E F Gb G Ab A Bb B".split(" ");function dn(n,t={}){if(isNaN(n)||n===-1/0||n===1/0)return"";n=Math.round(n);const m=(!0===t.sharps?ln:un)[n%12];return t.pitchClass?m:m+(Math.floor(n/12)-1)}var hn=n=>n.name,pn=n=>n.map(g).filter((n=>!n.empty)),fn=g;var bn=(n,t)=>n.height-t.height;function yn(n){return function(n,t){return t=t||bn,pn(n).sort(t).map(hn)}(n,bn).filter(((n,t,m)=>0===t||n!==m[t-1]))}var An={empty:!0,name:"",chordType:""},gn={};function vn(n){return"string"==typeof n?gn[n]||(gn[n]=function(n){const[t,m,e,a]=(r=n,jn.exec(r)||["","","",""]);var r;if(!e)return An;const o=e.toUpperCase(),i=xn.indexOf(o),s=A(m);return{empty:!1,name:t,roman:e,interval:c({step:i,alt:s,dir:1}).name,acc:m,chordType:a,alt:s,step:i,major:e===o,oct:0,dir:1}}(n)):"number"==typeof n?vn(xn[n]||""):t(n)?function(n){return vn(y(n.alt)+xn[n.step])}(n):w(n)?vn(n.name):An}V("RomanNumeral.romanNumeral","RomanNumeral.get",vn);var jn=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/,In="I II III IV V VI VII",xn=In.split(" ");In.toLowerCase().split(" ");Object.freeze([]);var Nn=(n,t,m="")=>t.map(((t,e)=>`${n[e]}${m}${t}`));function Dn(n,t,m,e,a){return r=>{const o=n.map((n=>vn(n).interval||"")),i=o.map((n=>N(r,n)));return{tonic:r,grades:n,intervals:o,scale:i,triads:Nn(i,t),chords:Nn(i,m),chordsHarmonicFunction:e.slice(),chordScales:Nn(i,a," ")}}}Dn("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),Dn("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),Dn("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),Dn("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));var Vn=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],wn={...$,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},Sn=Vn.map((function(n){const[t,m,e,a,r,o,i]=n,s=i?[i]:[],P=Number(m).toString(2);return{empty:!1,intervals:en(a).intervals,modeNum:t,chroma:P,normalized:P,name:a,setNum:m,alt:e,triad:r,seventh:o,aliases:s}})),$n={};function Tn(n){return"string"==typeof n?$n[n.toLowerCase()]||wn:n&&n.name?Tn(n.name):wn}function Cn(n){return(t,m)=>{const e=Tn(t);if(e.empty)return[];const a=S(e.modeNum,n),r=e.intervals.map((n=>N(m,n)));return a.map(((n,t)=>r[t]+n))}}Sn.forEach((n=>{$n[n.name]=n,n.aliases.forEach((t=>{$n[t]=n}))})),V("Mode.mode","Mode.get",Tn),V("Mode.mode","Mode.all",(function(){return Sn.slice()})),Cn(Vn.map((n=>n[4]))),Cn(Vn.map((n=>n[5])));var En={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function qn(n){if("string"!=typeof n)return["",""];const t=n.indexOf(" "),m=g(n.substring(0,t));if(m.empty){const t=g(n);return t.empty?["",n]:[t.name,""]}const e=n.substring(m.name.length+1);return[m.name,e.length?e:""]}function kn(n){const t=Array.isArray(n)?n:qn(n),m=g(t[0]).name,e=en(t[1]);if(e.empty)return En;const a=e.name,r=m?e.intervals.map((n=>N(m,n))):[],o=m?m+" "+a:a;return{...e,name:o,type:a,tonic:m,notes:r}}function On(n){const t=R(q(n)?n:kn(n).chroma);return an().filter((n=>t(n.chroma))).map((n=>n.name))}function zn(n){const t=n.map((n=>g(n).pc)).filter((n=>n)),m=t[0],e=yn(t);return S(e.indexOf(m),e)}var Fn={degrees:function(n){const{intervals:t,tonic:m}=kn(n),e=D(t,m);return n=>n?e(n>0?n-1:n):""},detect:function(n,t={}){const m=F(n).chroma,e=g(t.tonic??n[0]??""),a=e.chroma;if(void 0===a)return[];const r=m.split("");r[a]="1";const o=S(a,r).join(""),i=an().find((n=>n.chroma===o)),s=[];return i&&s.push(e.name+" "+i.name),"exact"===t.match||On(o).forEach((n=>{s.push(e.name+" "+n)})),s},extended:On,get:kn,modeNames:function(n){const t=kn(n);if(t.empty)return[];const m=t.tonic?t.notes:t.intervals;return U(t.chroma).map(((n,t)=>{const e=kn(n).name;return e?[m[t],e]:["",""]})).filter((n=>n[0]))},names:function(){return tn.map((n=>n.name))},rangeOf:function(n){const t=function(n){const t=Array.isArray(n)?zn(n):kn(n).notes,m=t.map((n=>g(n).chroma));return n=>{const e=g("number"==typeof n?dn(n):n),a=e.height;if(void 0===a)return;const r=a%12,o=m.indexOf(r);return-1!==o?function(n,t){const m=fn(n);if(m.empty)return"";const e=fn(t||dn(m.midi||m.chroma,{sharps:m.alt<0,pitchClass:!0}));if(e.empty||e.chroma!==m.chroma)return"";if(void 0===m.oct)return e.pc;const a=m.chroma-m.alt,r=e.chroma-e.alt,o=a>11||r<0?-1:a<0||r>11?1:0,i=m.oct+o;return e.pc+i}(e.name,t[o]):void 0}}(n);return(n,m)=>{const e=g(n).height,a=g(m).height;return void 0===e||void 0===a?[]:function(n,t){return n<t?function(n,t){const m=[];for(;t--;m[t]=t+n);return m}(n,t-n+1):function(n,t){const m=[];for(;t--;m[t]=n-t);return m}(n,n-t+1)}(e,a).map(t).filter((n=>n))}},reduced:function(n){const t=B(kn(n).chroma);return an().filter((n=>t(n.chroma))).map((n=>n.name))},scaleChords:function(n){const t=B(kn(n).chroma);return Q().filter((n=>t(n.chroma))).map((n=>n.aliases[0]))},scaleNotes:zn,steps:function(n){const{intervals:t,tonic:m}=kn(n);return D(t,m)},tokenize:qn,scale:V("Scale.scale","Scale.get",kn)};console.log(Fn.names()),console.log(Fn.get("F chromatic"))})();